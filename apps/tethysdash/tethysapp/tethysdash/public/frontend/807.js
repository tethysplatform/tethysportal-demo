"use strict";(self.webpackChunktethysdash_frontend=self.webpackChunktethysdash_frontend||[]).push([[807],{42192:(t,e,i)=>{i.d(e,{B:()=>s});const s=4},77807:(t,e,i)=>{i.r(e),i.d(e,{default:()=>u});var s=i(43938),n=i(79925),r=i(70915),o=i(61597),a=i(36438),h=i(14465),c=i(42192);class l extends n.Ay{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.hidpi_=void 0===t.hidpi||t.hidpi,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:n.VV,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,e,i,l){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===l||(this.loaderProjection_=l,this.loader=function(t){const e=t.load?t.load:s.D4,i=(0,a.Jt)(t.projection||"EPSG:3857"),l=t.ratio??1.5,u=t.crossOrigin??null;return function(s,a,g){g=t.hidpi?g:1;const d={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(d,t.params),s=(0,n.QD)(s,a,g,l);const _=function(t,e,i,s,n,a){const l=n.getCode().split(/:(?=\d+$)/).pop(),u=i/s,g=[(0,o.LI)((0,r.RG)(e)/u,c.B),(0,o.LI)((0,r.Oq)(e)/u,c.B)];a.SIZE=g[0]+","+g[1],a.BBOX=e.join(","),a.BBOXSR=l,a.IMAGESR=l,a.DPI=Math.round(a.DPI?a.DPI*s:90*s);const d=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,h.LW)(d,a)}(t.url,s,a,g,i,d),m=new Image;return m.crossOrigin=u,e(m,_).then((t=>{const e=(0,r.RG)(s)/t.width*g;return{image:t,extent:s,resolution:e,pixelRatio:g}}))}}({crossOrigin:this.crossOrigin_,params:this.params_,projection:l,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,s.D4)(t))})),super.getImageInternal(t,e,i,l))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}const u=l},79925:(t,e,i)=>{i.d(e,{Ay:()=>L,VV:()=>x,QD:()=>v});var s=i(43938),n=i(6141),r=i(66514),o=i(1685),a=i(6837),h=i(70915),c=i(61597),l=i(36438),u=i(9438),g=i(33513);function d(t){return Array.isArray(t)?Math.min(...t):t}var _=i(52913),m=i(93101);class p extends s.Ay{constructor(t,e,i,s,r,o,a){let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);const u=l?(0,h._N)(i,l):i,d=(0,h.q1)(u),p=(0,g.KQ)(t,e,d,s),I=m.l,R=new _.A(t,e,u,c,p*I,s),j=R.calculateSourceExtent(),A=(0,h.Im)(j)?null:o(j,p,r),E=A?n.A.IDLE:n.A.EMPTY,x=A?A.getPixelRatio():1;super(i,s,x,E),this.targetProj_=e,this.maxSourceExtent_=c,this.triangulation_=R,this.targetResolution_=s,this.targetExtent_=i,this.sourceImage_=A,this.sourcePixelRatio_=x,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==n.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==n.A.LOADED){const t=(0,h.RG)(this.targetExtent_)/this.targetResolution_,e=(0,h.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,g.XX)(t,e,this.sourcePixelRatio_,d(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==n.A.IDLE){this.state=n.A.LOADING,this.changed();const t=this.sourceImage_.getState();t==n.A.LOADED||t==n.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,u.KT)(this.sourceImage_,a.A.CHANGE,(t=>{const e=this.sourceImage_.getState();e!=n.A.LOADED&&e!=n.A.ERROR||(this.unlistenSource_(),this.reproject_())})),this.sourceImage_.load())}}unlistenSource_(){(0,u.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const I=p;var R=i(16444),j=i(42192);class A extends o.Ay{constructor(t,e){super(t),this.image=e}}class E extends R.A{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();return e&&(t=e[(0,r.FT)(e,t,0)]),t}getImage(t,e,i,s){const n=this.getProjection();if(!n||!s||(0,l.tI)(n,s))return n&&(s=n),this.getImageInternal(t,e,i,s);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,l.tI)(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==e&&(0,h.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new I(n,s,t,e,i,((t,e,i)=>this.getImageInternal(t,e,i,n)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,n){if(this.loader){const r=v(t,e,i,1),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&(0,h.ms)(this.wantedExtent_,r)||(0,h.ms)(this.image.getExtent(),r))&&(this.wantedResolution_&&d(this.wantedResolution_)===o||d(this.image.getResolution())===o)))return this.image;this.wantedProjection_=n,this.wantedExtent_=r,this.wantedResolution_=o,this.image=new s.Ay(r,o,i,this.loader),this.image.addEventListener(a.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case n.A.LOADING:this.loading=!0,i="imageloadstart";break;case n.A.LOADED:this.loading=!1,i="imageloadend";break;case n.A.ERROR:this.loading=!1,i="imageloaderror";break;default:return}this.hasListener(i)&&this.dispatchEvent(new A(i,e))}}function x(t,e){t.getImage().src=e}function v(t,e,i,s){const n=e/i,r=(0,h.q1)(t),o=(0,c.mk)((0,h.RG)(t)/n,j.B),a=(0,c.mk)((0,h.Oq)(t)/n,j.B),l=o+2*(0,c.mk)((s-1)*o/2,j.B),u=a+2*(0,c.mk)((s-1)*a/2,j.B);return(0,h.Bg)(r,n,0,[l,u])}const L=E}}]);