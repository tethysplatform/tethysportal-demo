"use strict";(self.webpackChunktethysdash_frontend=self.webpackChunktethysdash_frontend||[]).push([[36],{67036:(t,e,r)=>{r.r(e),r.d(e,{default:()=>O});var i=r(14465),o=r(27607),n=r(11078),a=r(6837),s=r(74238),l=r(36438),u=r(68711),c=r(9438),h=r(70915),_=r(61597),d=r(33513),E=r(52913),T=r(93101),f=r(7771),g=r(83954);class x{constructor(t){this.gl_=t,this.program_=A(t,"\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (\n      v_texcoord.x < 0.0 ||\n      v_texcoord.y < 0.0 ||\n      v_texcoord.x > 1.0 ||\n      v_texcoord.y > 1.0\n    ) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n","\n  attribute vec4 a_position;\n  attribute vec4 a_texcoord;\n\n  uniform mat4 u_matrix;\n  uniform mat4 u_textureMatrix;\n\n  varying vec2 v_texcoord;\n\n  void main() {\n    gl_Position = u_matrix * a_position;\n    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;\n    v_texcoord = texcoord;\n  }\n"),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,e,r,i,o,n,a,s,l,u,c,h,_){const d=this.gl_;void 0===s&&(s=i),void 0===l&&(l=o),void 0===n&&(n=e),void 0===a&&(a=r),void 0===u&&(u=n),void 0===c&&(c=a),void 0===h&&(h=d.canvas.width),void 0===_&&(_=d.canvas.height),d.bindTexture(d.TEXTURE_2D,t),d.useProgram(this.program_),d.bindBuffer(d.ARRAY_BUFFER,this.positionBuffer),d.enableVertexAttribArray(this.positionLocation),d.vertexAttribPointer(this.positionLocation,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,this.texcoordBuffer),d.enableVertexAttribArray(this.texcoordLocation),d.vertexAttribPointer(this.texcoordLocation,2,d.FLOAT,!1,0,0);let E=g.j0(0,h,0,_,-1,1);E=g.Tl(E,s,l,0),E=g.hs(E,u,c,1),d.uniformMatrix4fv(this.matrixLocation,!1,E);let T=g.wT(i/e,o/r,0);T=g.hs(T,n/e,a/r,1),d.uniformMatrix4fv(this.textureMatrixLocation,!1,T),d.uniform1i(this.textureLocation,0),d.drawArrays(d.TRIANGLES,0,this.positions.length/2)}}function R(t,e,r){const i=t.createShader(e);if(null===i)throw new Error("Shader compilation failed");if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(i);if(null===e)throw new Error("Shader info log creation failed");throw new Error(e)}return i}function A(t,e,r){const i=t.createProgram(),o=R(t,t.VERTEX_SHADER,r),n=R(t,t.FRAGMENT_SHADER,e);if(null===i)throw new Error("Program creation failed");if(t.attachShader(i,o),t.attachShader(i,n),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){if(null===t.getProgramInfoLog(i))throw new Error("Program info log creation failed");throw new Error}return i}const m=[];function p(t,e,r,i,o,n,a,s,l,u,c,_,d,E){const T=Math.round(i*e),f=Math.round(i*r);let R,m;if(t.canvas.width=T,t.canvas.height=f,m=t.createTexture(),t.bindTexture(t.TEXTURE_2D,m),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),d?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,T,f,0,t.RGBA,c,null),R=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,R),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,m,0),null===R)throw new Error("Could not create framebuffer");if(null===m)throw new Error("Could not create texture");if(0===l.length)return{width:T,height:f,framebuffer:R,texture:m};const p=(0,h.S5)();let F,v,L;l.forEach((function(t,e,r){(0,h.X$)(p,t.extent)}));const b=1/o;if(E&&1===l.length&&0===u)F=l[0].texture,v=l[0].width,L=l[0].width;else{if(F=t.createTexture(),null===m)throw new Error("Could not create texture");v=Math.round((0,h.RG)(p)*b),L=Math.round((0,h.Oq)(p)*b);const e=t.getParameter(t.MAX_TEXTURE_SIZE),r=Math.max(v,L),i=r>e?e/r:1,o=Math.round(v*i),n=Math.round(L*i);t.bindTexture(t.TEXTURE_2D,F),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),d?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,o,n,0,t.RGBA,c,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,F,0);const s=new x(t);l.forEach((function(e,r,l){const c=(e.extent[0]-p[0])*b*i,_=-(e.extent[3]-p[3])*b*i,E=(0,h.RG)(e.extent)*b*i,T=(0,h.Oq)(e.extent)*b*i;if(t.bindFramebuffer(t.FRAMEBUFFER,a),t.viewport(0,0,o,n),e.clipExtent){const r=(e.clipExtent[0]-p[0])*b*i,o=-(e.clipExtent[3]-p[3])*b*i,n=(0,h.RG)(e.clipExtent)*b*i,a=(0,h.Oq)(e.clipExtent)*b*i;t.enable(t.SCISSOR_TEST),t.scissor(d?r:Math.round(r),d?o:Math.round(o),d?n:Math.round(r+n)-Math.round(r),d?a:Math.round(o+a)-Math.round(o))}s.drawImage(e.texture,e.width,e.height,u,u,e.width-2*u,e.height-2*u,d?c:Math.round(c),d?_:Math.round(_),d?E:Math.round(c+E)-Math.round(c),d?T:Math.round(_+T)-Math.round(_),o,n),t.disable(t.SCISSOR_TEST)})),t.deleteFramebuffer(a)}const D=(0,h.Py)(a),U=(0,h.Py)(p),S=t=>{const e=(t[0][0]-D[0])/n*i,r=-(t[0][1]-D[1])/n*i;return{u1:(t[1][0]-D[0])/n*i,v1:-(t[1][1]-D[1])/n*i,u0:e,v0:r,u2:(t[2][0]-D[0])/n*i,v2:-(t[2][1]-D[1])/n*i}};t.bindFramebuffer(t.FRAMEBUFFER,R),t.viewport(0,0,T,f);{const e=[],r=[],i=A(t,"\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n","\n  attribute vec4 a_position;\n  attribute vec2 a_texcoord;\n\n  varying vec2 v_texcoord;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n     v_texcoord = a_texcoord;\n  }\n");t.useProgram(i);const n=t.getUniformLocation(i,"u_texture");t.bindTexture(t.TEXTURE_2D,F),t.uniform1i(n,0),s.getTriangles().forEach((function(t,i,n){const a=t.source,s=t.target,{u1:l,v1:u,u0:c,v0:h,u2:_,v2:d}=S(s),E=(a[0][0]-U[0])/o/v,T=-(a[0][1]-U[1])/o/L,f=(a[1][0]-U[0])/o/v,g=-(a[1][1]-U[1])/o/L,x=(a[2][0]-U[0])/o/v,R=-(a[2][1]-U[1])/o/L;e.push(l,u,c,h,_,d),r.push(f,g,E,T,x,R)}));const a=g.j0(0,T,f,0,-1,1),l=t.getUniformLocation(i,"u_matrix");t.uniformMatrix4fv(l,!1,a);const u=t.getAttribLocation(i,"a_position"),c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.vertexAttribPointer(u,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(u);const h=t.getAttribLocation(i,"a_texcoord"),_=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h),t.drawArrays(t.TRIANGLES,0,e.length/2)}if(_){const e=A(t,"\n  precision mediump float;\n\n  uniform vec4 u_val;\n  void main() {\n     gl_FragColor = u_val;\n  }\n","\n  attribute vec4 a_position;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n  }\n");t.useProgram(e);const r=g.j0(0,T,f,0,-1,1),i=t.getUniformLocation(e,"u_matrix");t.uniformMatrix4fv(i,!1,r);const o=Array.isArray(_)?_:[0,0,0,255],n=t.getUniformLocation(e,"u_val");t.uniform4fv(n,o);const a=t.getAttribLocation(e,"a_position"),l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);const u=s.getTriangles().reduce((function(t,e){const r=e.target,{u1:i,v1:o,u0:n,v0:a,u2:s,v2:l}=S(r);return t.concat([i,o,n,a,n,a,s,l,s,l,i,o])}),[]);t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.drawArrays(t.LINES,0,u.length/2)}return{width:T,height:f,framebuffer:R,texture:m}}class F extends o.Ay{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=void 0!==t.renderEdges&&t.renderEdges,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=t.sourceProj,r=e.getExtent(),i=t.sourceTileGrid.getExtent();this.clipExtent_=e.canWrapX()?i?(0,h._N)(r,i):r:i;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const l=a?(0,h._N)(o,a):o;if(0===(0,h.UG)(l))return void(this.state=n.A.EMPTY);r&&(s=s?(0,h._N)(s,r):r);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=t.targetProj,f=(0,d.aY)(e,c,l,u);if(!isFinite(f)||f<=0)return void(this.state=n.A.EMPTY);const g=void 0!==t.errorThreshold?t.errorThreshold:T.l;if(this.triangulation_=new E.A(e,c,l,s,f*g,u,t.transformMatrix),0===this.triangulation_.getTriangles().length)return void(this.state=n.A.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(f);let x=this.triangulation_.calculateSourceExtent();if(s&&(e.canWrapX()?(x[1]=(0,_.qE)(x[1],s[1],s[3]),x[3]=(0,_.qE)(x[3],s[1],s[3])):x=(0,h._N)(x,s)),(0,h.UG)(x)){let i=0,o=0;e.canWrapX()&&(i=(0,h.RG)(r),o=Math.floor((x[0]-r[0])/i)),(0,h.QJ)(x.slice(),e,!0).forEach((e=>{const r=this.sourceTileGrid_.getTileRangeForExtentAndZ(e,this.sourceZ_),n=t.getTileFunction;for(let t=r.minX;t<=r.maxX;t++)for(let e=r.minY;e<=r.maxY;e++){const r=n(this.sourceZ_,t,e,this.pixelRatio_);if(r){const t=o*i;this.sourceTiles_.push({tile:r,offset:t})}}++o})),0===this.sourceTiles_.length&&(this.state=n.A.EMPTY)}else this.state=n.A.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let e=!1;if(this.sourceTiles_.forEach((r=>{const i=r.tile;if(!i||i.getState()!==n.A.LOADED)return;const a=i.getSize(),s=this.gutter_;let l;const u=(0,o.bL)(i.getData());u?l=u:(e=!0,l=(0,o.$r)((0,o.xo)(i.getData())));const c=[a[0]+2*s,a[1]+2*s],h=l instanceof Float32Array,_=c[0]*c[1],d=h?Float32Array:Uint8ClampedArray,E=new d(l.buffer),T=d.BYTES_PER_ELEMENT,f=T*E.length/_,g=E.byteLength/c[1],x=Math.floor(g/T/c[0]),R=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);R[0]+=r.offset,R[2]+=r.offset;const A=this.clipExtent_?.slice();A&&(A[0]+=r.offset,A[2]+=r.offset),t.push({extent:R,clipExtent:A,data:E,dataType:d,bytesPerPixel:f,pixelSize:c,bandCount:x})})),this.sourceTiles_.length=0,0===t.length)return this.state=n.A.ERROR,void this.changed();const r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),a="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],l=a*this.pixelRatio_,c=s*this.pixelRatio_,h=this.targetTileGrid_.getResolution(r),_=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),E=t[0].bandCount,T=new t[0].dataType(E*l*c),g=function(t,e,r){let i;return i=r&&r.length?r.shift():f.Wl?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("webgl",{premultipliedAlpha:!1,antialias:!1})}(l,c,m);let x;const R=g.RGBA;let A;t[0].dataType==Float32Array?(A=g.FLOAT,g.getExtension("WEBGL_color_buffer_float"),g.getExtension("OES_texture_float"),g.getExtension("EXT_float_blend"),x=null!==g.getExtension("OES_texture_float_linear")&&this.interpolate):(A=g.UNSIGNED_BYTE,x=this.interpolate);for(let e=Math.ceil(E/4)-1;e>=0;--e){const r=[];for(let i=0,o=t.length;i<o;++i){const o=t[i],n=o.pixelSize,a=n[0],s=n[1],l=new o.dataType(4*a*s),u=o.data;let c=4*e;for(let t=0,e=l.length;t<e;t+=4)l[t]=u[c],l[t+1]=u[c+1],l[t+2]=u[c+2],l[t+3]=u[c+3],c+=E;const h=g.createTexture();g.bindTexture(g.TEXTURE_2D,h),x?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,R,a,s,0,R,A,l),r.push({extent:o.extent,clipExtent:o.clipExtent,texture:h,width:a,height:s})}const{framebuffer:i,width:o,height:n}=p(g,a,s,this.pixelRatio_,_,h,d,this.triangulation_,r,this.gutter_,A,this.renderEdges_,x),l=o,u=4*n,c=new t[0].dataType(l*u);g.bindFramebuffer(g.FRAMEBUFFER,i),g.readPixels(0,0,o,n,g.RGBA,A,c);let f=4*e;for(let t=0,e=c.length;t<e;t+=4){const e=(l-1-(t/u|0))*u+t%u;T[f]=c[e],T[f+1]=c[e+1],T[f+2]=c[e+2],T[f+3]=c[e+3],f+=E}}if(function(t){const e=t.canvas;e.width=1,e.height=1,t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}(g),m.push(g.canvas),e){const t=(0,u.Y)(a,s),e=new ImageData(T,a);t.putImageData(e,0,0),this.reprojData_=t.canvas}else this.reprojData_=T;this.reprojSize_=[Math.round(l),Math.round(c)],this.state=n.A.LOADED,this.changed()}load(){if(this.state!==n.A.IDLE&&this.state!==n.A.ERROR)return;this.state=n.A.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((({tile:e})=>{const r=e.getState();if(r!==n.A.IDLE&&r!==n.A.LOADING)return;t++;const i=(0,c.KT)(e,a.A.CHANGE,(()=>{const r=e.getState();r!=n.A.LOADED&&r!=n.A.ERROR&&r!=n.A.EMPTY||((0,c.JH)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(i)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function({tile:t}){t.getState()==n.A.IDLE&&t.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(c.JH),this.sourcesListenerKeys_=null}}const v=F;var L=r(6782),b=r(4863),D=r(4087),U=r(66017),S=r(18469);class P extends U.A{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection;let r=t.tileGrid;void 0===r&&e&&(r=(0,b.EN)({extent:(0,b.kZ)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?(0,L.xq)(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?(0,L.xq)(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return e&&!(0,l.tI)(e,t)||this.transformMatrix?0:this.gutter_}setLoader(t){this.loader_=t}getReprojTile_(t,e,r,i,o){const n=this.tileGrid||this.getTileGridForProjection(o||i),a=Math.max.apply(null,n.getResolutions().map(((t,e)=>{const r=(0,L.xq)(n.getTileSize(e)),i=this.getTileSize(e);return Math.max(i[0]/r[0],i[1]/r[1])}))),s=this.getTileGridForProjection(i),l=[t,e,r],u=this.getTileCoordForTileUrlFunction(l,i),c=Object.assign({sourceProj:o||i,sourceTileGrid:n,targetProj:i,targetTileGrid:s,tileCoord:l,wrappedTileCoord:u,pixelRatio:a,gutter:this.gutter_,getTileFunction:(t,e,r,i)=>this.getTile(t,e,r,i),transformMatrix:this.transformMatrix},this.tileOptions),h=new v(c);return h.key=this.getKey(),h}getTile(t,e,r,i,n){const u=this.getProjection();if(n&&(u&&!(0,l.tI)(u,n)||this.transformMatrix))return this.getReprojTile_(t,e,r,n,u);const c=this.getTileSize(t),h=this.loader_,_=new AbortController,d={signal:_.signal,crossOrigin:this.crossOrigin_},E=this.getTileCoordForTileUrlFunction([t,e,r]);if(!E)return null;const T=E[0],f=E[1],g=E[2],x=this.getTileGrid()?.getFullTileRange(T);x&&(d.maxY=x.getHeight()-1);const R=Object.assign({tileCoord:[t,e,r],loader:function(){return(0,s.hq)((function(){return h(T,f,g,d)}))},size:c,controller:_},this.tileOptions),A=new o.Ay(R);return A.key=this.getKey(),A.addEventListener(a.A.CHANGE,this.handleTileChange_),A}handleTileChange_(t){const e=t.target,r=(0,D.v6)(e),i=e.getState();let o;i==n.A.LOADING?(this.tileLoadingKeys_[r]=!0,o=S.A.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==n.A.ERROR?S.A.TILELOADERROR:i==n.A.LOADED?S.A.TILELOADEND:void 0),o&&this.dispatchEvent(new U.c(o,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,l.tI)(e,t))&&!this.transformMatrix)return this.tileGrid;const r=(0,D.v6)(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=(0,b.pr)(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,e){const r=(0,l.Jt)(t);if(r){const t=(0,D.v6)(r);t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}}const M=P,w=new Error("Image failed to load");function y(t,e,r,o,n){return new Promise(((a,s)=>{const l=new Image;l.crossOrigin=n.crossOrigin??null,l.addEventListener("load",(()=>a(l))),l.addEventListener("error",(()=>s(w))),l.src=(0,i.M)(t,e,r,o,n.maxY)}))}function G(t){return function(e,r,o,n){return y((0,i.de)(t,e,r,o),e,r,o,n)}}function C(t){let e;if(Array.isArray(t))e=G(t);else if("string"==typeof t)e=G((0,i.Uu)(t));else{if("function"!=typeof t)throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");r=t,e=function(t,e,i,o){return y(r(t,e,i,o),t,e,i,o)}}var r;return e}let I=0;function X(t){return Array.isArray(t)?t.join("\n"):"string"==typeof t?t:(++I,"url-function-key-"+I)}const O=class extends M{constructor(t){let e,r=(t=t||{}).loader;t.url&&(r=C(t.url),e=X(t.url));const i=r?t.state:"loading",o=void 0===t.wrapX||t.wrapX;super({loader:r,key:e,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize,gutter:t.gutter,maxResolution:t.maxResolution,projection:t.projection,tileGrid:t.tileGrid,state:i,wrapX:o,transition:t.transition,interpolate:!1!==t.interpolate,crossOrigin:t.crossOrigin,zDirection:t.zDirection})}setUrl(t){const e=C(t);this.setLoader(e),this.setKey(X(t)),"ready"!==this.getState()&&this.setState("ready")}}},83954:(t,e,r)=>{function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function n(t,e,r,i,o,n,a){const s=1/(t-e),l=1/(r-i),u=1/(o-n);return(a=a??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=-2*s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*l,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*u,a[11]=0,a[12]=(t+e)*s,a[13]=(i+r)*l,a[14]=(n+o)*u,a[15]=1,a}function a(t,e,r,i,o){return(o=o??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=t[0]*e,o[1]=t[1]*e,o[2]=t[2]*e,o[3]=t[3]*e,o[4]=t[4]*r,o[5]=t[5]*r,o[6]=t[6]*r,o[7]=t[7]*r,o[8]=t[8]*i,o[9]=t[9]*i,o[10]=t[10]*i,o[11]=t[11]*i,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o}function s(t,e,r,i,o){let n,a,s,l,u,c,h,_,d,E,T,f;return t===(o=o??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])?(o[12]=t[0]*e+t[4]*r+t[8]*i+t[12],o[13]=t[1]*e+t[5]*r+t[9]*i+t[13],o[14]=t[2]*e+t[6]*r+t[10]*i+t[14],o[15]=t[3]*e+t[7]*r+t[11]*i+t[15]):(n=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],_=t[7],d=t[8],E=t[9],T=t[10],f=t[11],o[0]=n,o[1]=a,o[2]=s,o[3]=l,o[4]=u,o[5]=c,o[6]=h,o[7]=_,o[8]=d,o[9]=E,o[10]=T,o[11]=f,o[12]=n*e+u*r+d*i+t[12],o[13]=a*e+c*r+E*i+t[13],o[14]=s*e+h*r+T*i+t[14],o[15]=l*e+_*r+f*i+t[15]),o}function l(t,e,r,i){return(i=i??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=t,i[13]=e,i[14]=r,i[15]=1,i}r.d(e,{Tl:()=>s,Z1:()=>o,hs:()=>a,j0:()=>n,vt:()=>i,wT:()=>l})}}]);